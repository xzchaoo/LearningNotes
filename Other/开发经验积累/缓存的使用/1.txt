B站的主页有一个需求: 每n秒钟刷新一下当前页面的一些统计信息.

统计信息包括:
1. 在线人数
2. 某个视频区里的视频更新条数
3. ...等之类的统计信息

观察后发现B站采用这样的策略:

1. 客户端每n秒发一次请求获取统计信息
2. 获取的统计信息在n秒后过期, 看http响应头
3. 绝大部分的请求都命中缓存

也就是说
然后当第一个用户请求来的时候, 响应会被放到缓存服务器里(比如varnish), 然后这n秒内, 有其他的请求再来的时候, 就直接走缓存路线了, 然后利用http响应头或配置varnish控制缓存时间


