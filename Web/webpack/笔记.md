npm install --save-dev webpack-dev-server

webpack-dev-server支持两种方式来刷新页面
iframe 将页面放在iframe里
inline 将webpack-dev-server的客户端放到bundle.js里
两种方式都支持热模块替换, 只替换一部分 而不是页面重载

iframe
不需要额外的配置 值需要访问
http://«host»:«port»/webpack-dev-server/«path»

inline
需要 --inline 参数 并且 在 webpack.config.js 的配置 devServer:{inline:true}

# 代码拆分 #
https://webpack.js.org/guides/code-splitting/
1. 按需加载
2. 更小bundle

## 第三方库拆分出去 ##
CommonsChunkPlugin
https://webpack.js.org/guides/code-splitting-libraries/

## css拆分 ##
ExtractTextWebpackPlugin

## 按需代码拆分 ##
使用 import() 函数
```
function determineDate() {
  import('moment').then(function(moment) {
    console.log(moment().format());
  }).catch(function(err) {
    console.log('Failed to load moment', err);
  });
}

determineDate();
```

# 生产build #
https://webpack.js.org/guides/production-build/

webpack -p
相当于
webpack --optimize-minimize --define process.env.NODE_ENV="'production'"
```
Minification using UglifyJsPlugin
Runs the LoaderOptionsPlugin, see its documentation
Sets the Node environment variable
```

# 自定义变量 #
```
module.exports = {
  /*...*/
  plugins:[
    new webpack.DefinePlugin({
      'process.env.NODE_ENV': JSON.stringify('production')
    })
  ]
};
```
注意要用 JSON.stringify 抱起来
最终会将程序里的 process.env.NODE_ENV 替换成 'production' 字符串
类似宏替换 !
所以最后生成的代码可能会有
if('production'!='production'){相当于false} 会被优化掉
注意这个替换不会对 webpack.config.js 起作用

# 如何使用环境变量 #
process.env.NODE_ENV

使用 corss-env 来设置环境变量, 可以跨操作系统
```
{
  "scripts": {
    "build": "cross-env NODE_ENV=production PLATFORM=web webpack"
  }
}
```



webpack-manifest-plugin 将最终的文件名映射写入文件
```
{
  "main.js": "main.155567618f4367cd1cb8.js",
  "vendor.js": "vendor.c2330c22cd2decb5da5a.js"
}
```

webpack运行的时候使用一个int的id来引用js文件, 比如 0 对应 main.xxx.js 文件 1对应 vendor.xxx.js 文件
很有可能重新打包的时候会导致这个映射变化 比如 2对应vendor.xxx.js
那么这会导致所有依赖了 vendor.xxx.js 的文件里都要将 1 改成 2, 文件内容发生变化 -> 哈希变化
于是就想要说能不能将一些映射固定下来
NamedModulesPlugin
HashedModuleIdsPlugin

# 开发 #
https://webpack.js.org/guides/development/
