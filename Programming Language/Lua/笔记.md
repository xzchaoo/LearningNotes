https://github.com/openresty/lua-nginx-module

lua
-i 表示执行完后停留在交互模式
-e expression 执行expression的内容
-l FILE load该文件

全局变量 _PROMPT 控制你的 prompt
arg[index] 获取启动参数
type(obj) 用来查看对象类型
nil 表示控制

如果两个字符串的内容都是数值的话 那么是可以进行数学操作的

# string #
支持单引号 双引号 多行文本
string.gsub(a, 'one' ,'two')
将所有one替换成two
page = [[
多行文本
]]

a .. b 表示将两个对象的字符串相加
sub


#  #
write

#  #
print (1 .. 3) 输出13

# table / 关联数组  #
```lua
a = {}
a["x"] = 10
b = a      -- `b' refers to the same table as `a'
print(b["x"])  --> 10
b["x"] = 20
print(a["x"])  --> 20
print(a.x) --> 20
a = nil    -- now only `b' still refers to the table
b = nil    -- now there are no references left to the table
```
## 构造 ##

当做数组使用
a={1,2,3,4}
print(a[2]) == 2 注意下标从1开始

a={x=1,y=2}
print(a.y) == 2
print(a['x']) ==1

a={x=1,y=2,3,4,z=5}
a[1]==3
a[2]==4
a['x']==a.x==1

```
list = nil
for line in io.lines() do
  list = {next=list, value=line}
end
```
table可以内嵌
a={b={c=3}}
a.b.x == 3

指定下标
a={[3]=4}
a[3]==4 !!!
file:///D:/Documents/lua/3.6.html

# for #

```
for var=beg,end[,step]do
	...
end

for a=1,10,2 do
	print(a)
end
会打印出1,3,5,7,9

for i=10,1,-1 do print(i) end
逆序

```
只有break没有continue

## 特殊的for ##

```
a={x=1,y=2,z=3,4,5,6}
for index,value in ipairs(a) do
	print(index,value)
end
只会打印出
1 4
2 5
3 6
将ipairs换成pairs就会打印出全部的key/value
```


# 函数 #
line = io.read()
tonumber(str)
error('msg')
tostring(obj)
ipairs, 数组似乎是从1开始的
print

# 表达式 #
支持 常见的 数学运算 并且支持 ^ 
注意 不等 用 ~= 表示 而不是!= 其他的一样
table userdata function是按照引用比较的
逻辑操作用 and or not
(a>b) and a or b 用于 a>b?a:b 语法
注意 (not 0) == false !!!!!


# io #
io.lines()
print()
read()


# 其他 #
支持批量赋值
a,b=1,2,3 3会被忽略
a,b,c=1,2 会被忽略
```
function f2()
	return 1,2
end
a,b=f2()
print(a,b)
```

所有变量默认是全局的, 需要在语句块(函数,while, if/then/else, do/end)里 local c=2; 否则将会改动全局的c值
这样是合法的 local c = c+1; 后面的c是全局的c
应该尽量使用local
local a 默认将a赋值为nil
local也可以用于覆盖父作用域的变量

# if/then/else #
```
if a<0 then
	...
elseif b<0 then
	...
else
	...
end
```

# while #
a是一个数组
local i=1 注意一般情况下数组的索引从1开始
while a[i] do
	print(a[i])
	i=i+1
end

# do/eng #
用于显示创建一个语句块
```
do
	local a = a+1
	local b = b+2
	...
end
```

# repeat/until #
```
local a=2;
repeat
	a=...
until a==1
```


# 函数 #
函数如果没有返回值的话, 那它的返回值什么都不是, 是一个奇怪的东西
如果你对他 type 操作都会报错!
print 不会输出任何信息
```
function ceshi()
end
print(ceshi())
print(1,ceshi(),2)
print(1,0,2)
仔细观察输出
```